# 存档代码说明

> **警告**: 这些文件包含已损坏或过时的代码  
> **用途**: 仅供参考，不建议直接使用  
> **状态**: 已归档，不再维护

---

## 📁 文件说明

### CustomMathBlock.tsx
- **状态**: ⚠️ 早期原型版本
- **问题**: 代码结构过时，与新版本重复
- **可用性**: 可作为参考，但建议使用 `CODE_LIBRARY.md` 中的版本
- **注意**: 该文件的逻辑已被提取到可复用的代码库中

### NotesSidebar.tsx  
- **状态**: 🔴 严重损坏
- **问题**: 多次修改导致代码混乱，SSR兼容性问题
- **可用性**: 不建议使用，已有正确的替代方案
- **注意**: 该文件包含了失败的集成尝试，可作为"反面教材"

### schema.ts
- **状态**: 🔴 空壳文件
- **问题**: 没有实际功能，仅有基础结构
- **可用性**: 无实用价值
- **注意**: 原本计划用于BlockNote schema定义，但未完成

---

## 🔄 替代方案

### 替代 CustomMathBlock.tsx
使用 `../CODE_LIBRARY.md` 中的 **MathBlock 组件**:
- ✅ 修复了已知问题
- ✅ 包含完整的错误处理
- ✅ 使用内联样式，无CSS依赖

### 替代 NotesSidebar.tsx
使用 `../CODE_LIBRARY.md` 中的 **NotesSidebar 模板**:
- ✅ 修复了SSR兼容性问题
- ✅ 正确的BlockNote API使用
- ✅ 清晰的代码结构

### 替代 schema.ts
参考 `../docs/MATH_LIBRARY_DEVELOPMENT_GUIDE.md` 中的 **Schema设计**:
- ✅ 完整的类型定义
- ✅ 符合BlockNote规范
- ✅ 支持数学块扩展

---

## ⚠️ 使用警告

如果您必须查看这些文件，请注意:

1. **不要直接复制代码** - 这些代码有已知的问题
2. **仅作为参考** - 了解之前的实现思路即可
3. **优先使用新版本** - `CODE_LIBRARY.md` 中有更好的实现
4. **记录错误教训** - 这些文件展示了什么不该做

---

## 📚 学习价值

虽然这些文件不能直接使用，但它们记录了开发过程中的重要经验:

### 成功经验
- KaTeX集成的基础思路是正确的
- React组件化的架构设计合理
- 错误处理的重要性得到体现

### 失败教训
- 不要在多个地方维护相同功能的代码
- SSR兼容性需要从一开始就考虑
- 频繁修改文件会导致代码质量下降
- 空壳文件比有问题的实现更糟糕

---

*存档代码说明*  
*归档时间: 2025年9月30日*  
*建议: 使用新的可复用代码库*